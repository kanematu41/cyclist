<div class="container">
	<div class="row">
		<div class="col">
			<div class="user-title">
				<h3>プロフィール編集</h3>
			</div>
		</div>
	</div>

	<%= form_for(@user) do |f| %>
	<%= render 'home/error_messages', model: f.object %>
	<div class="user-profile">
	<div class="row">
		<div class="col-xs-5">
			<div align="center">
				<!-- サムネイルの更新 -->
				<%= attachment_image_tag @user, :image, size: "200x200", fallback: "no_image.png", id: "file-preview" %>
				<!-- 画像選択のボタンの変更 -->
				<%= f.attachment_field :image, id: "image-select" %>
				<label for="image-select" class="btn btn-primary user-profile-button" style="display: block;">画像選択</label>
			</div>
		</div>
		<div class="col-xs-5">
			<h4>ニックネーム</h4>
				<%= f.text_field :name, class: "form-control" %>
			<h4>自己紹介</h4>
				<%= f.text_area :introduction, class: "form-control" %>
		</div>
	</div>
	</div>

  <div class="row">
    <div class="col-xs-3 col-xs-offset-7">
      <div class="sign-submit">
        <%= f.submit "情報の更新" ,class: "btn btn-lg btn-primary btn-block" %>
      </div>
    </div>
  </div>
  <% end %>

</div>


<!-- 画像選択した際に、選択した画像を表示させるjavascript -->
<script>
	document.getElementById('image-select').addEventListener('change', function (e) {
    // 1枚だけ表示する
    var file = e.target.files[0];

    // ファイルのブラウザ上でのURLを取得する
    var blobUrl = window.URL.createObjectURL(file);

    // img要素に表示
    var img = document.getElementById('file-preview');
    img.src = blobUrl;
});
</script>